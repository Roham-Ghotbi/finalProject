<!doctype html>
<html lang="en">
{% extends "base.html" %}
  <body>  
    {% block content %}
    <div class="navbar-fixed">
    <nav>
      <div class="nav-wrapper">
        <a id="title" class="brand-logo">What I'm working on ...</a>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li><a href="{{url_for('logout')}}"><i class="material-icons tooltipped" data-position="left" data-tooltip="Logout">person_pin</i> MW</a></li> 
            <!-- replace with name icon -->
        </ul>
      </div>
    </nav>
  </div>
  <br><br>
    <div class="row-projects">
      {% for project in p %}
        <div class="project">
          <!-- Project Focus -->
          <a href="{{ url_for('project_focus', value=project['project_name']) }}" 
            class="project-line pop" data-toggle="popover" 
            data-trigger="hover" 
            data-html="true"
            data-content="<h5 id = 'project-title'>{{ project['project_name'] }}</h5>" 
            data-placement="top" 
            data-color="{{ project['color'] }}"
            data-project-id="{{ project['project_id'] }}"
            data-project-name="{{ project['project_name'] }}"></a>
          <ul class="slides">
            {% for action in project['actions']%}
              {% if action['finished'] == "0"%}
                <li class="slide action-button pop not_done {{ action['project_id'] }}" data-toggle="popover " 
                     data-trigger="hover" 
                     data-action-id="{{ action['action_id'] }}" 
                     title="{{ action['action_name'] }}" 
                     data-color="{{ action['color'] }}"
                     data-project-name="{{ project['project_name'] }}"
                     data-content="<div>
                      {{ action['description'] }}
                      <br>
                      <a class='btn btn-primary' href='{{ url_for('edit_action', value=action) }}''>Edit</a>
                      <a class='btn btn-primary' href='{{ url_for('remove_action', value=action['action_id']) }}''>Delete</a>
                      </div>">
                </li>
              {% else %} 
                <li class="slide action-button pop done {{ action['project_id'] }}" data-toggle="popover" 
                     data-trigger="hover" 
                     data-action-id="{{ action['action_id'] }}" 
                     title="{{ action['action_name'] }}" 
                     data-color="{{ action['color'] }}"
                     data-project-name="{{ project['project_name'] }}"
                     data-content="<div>
                      {{ action['description'] }}
                      <br>
                      <a class='btn btn-primary' href='{{ url_for('remove_action', value=action['action_id']) }}''>Edit</a>
                      <a class='btn btn-primary' href='{{ url_for('remove_action', value=action['action_id']) }}''>Delete</a>
                      </div>">
                </li>
              {% endif %} 
            {% endfor %}
          </ul>
          <a class="btn btn-primary" role="button" href="{{ url_for('create_action',value=project['project_name'] ) }}">+</a>
        </div>
      {% endfor %}
    </div>

    <!-- Floating Action Button Modal Trigger-->
    <div class="fixed-action-btn">
      <button data-target="create-action-modal" class="modal-trigger btn-floating btn-large red accent-2 tooltipped" data-position="left" data-tooltip="Create Project"><i class="large material-icons">add</i></button>
    </div>
    
    <!-- Create Project Modal Structure -->
    <div id="create-project-modal" class="modal">
      <div class="modal-content">
        <h4>Create a Project</h4>
        <form method="post" action='{{ url_for("create_project") }}' name="ProjectForm">
        {{ projectForm.hidden_tag() }}
        <p>
          Project Name: <br>
          {{projectForm.project_name(size=120)}} <br>
        </p>
        <p>
          Description: <br>
          {{projectForm.description(size=120)}} <br>          
        </p>
        <p>
          Due Date: <br>
          {{projectForm.due_date(size=120)}} <br>          
        </p>
        <p><input class="btn btn-primary" type="submit" value="Create Project"></p>
      </form>
      </div>
    </div>


    <!-- Create Action Modal Structure -->
    <div id="create-action-modal" class="modal">
      <div class="modal-content">
        <h4>Add Action</h4>
        <form method="post" action="{{ url_for('create_action', value='Build a House' ) }}" name="ActionForm">
          <!-- how to set value here -->
        {{ actionForm.hidden_tag() }}
        <p>
          Action Name: <br>
          {{actionForm.action_name(size=120)}} <br>
        </p>
        <p>
          Description: <br>
          {{actionForm.description(size=120)}} <br>          
        </p>
        <p>
          Due Date: <br>
          {{actionForm.due_date(size=120)}} <br>          
        </p>
        <p><input class="btn btn-primary" type="submit" value="Add Action"></p>
      </form>
      </div>
    </div>

    <!-- Edit Action Modal Structure -->
    <div id="edit-action-modal" class="modal">
      <div class="modal-content">
        <h4>Modal Header</h4>
        <p>A bunch of text</p>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Agree</a>
      </div>
    </div>

    <script src="{{url_for('static', filename='js/main.js')}}"></script>
  {% endblock %}
  </body>

</html>
