<!doctype html>
<html lang="en">
{% extends "base.html" %}
  <body>  
    {% block content %}
    <div class="navbar-fixed">
    <nav>
      <div class="nav-wrapper">
        <a id="title" class="brand-logo left" data-prev-title="I'm working on ..." >I'm working on ...</a>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li><a class="tooltipped" data-position="left" data-tooltip="Logout" href="{{url_for('logout')}}"> MW</a></li> 
            <!-- replace with user initials icon -->
        </ul>
      </div>
    </nav>
  </div>
    <div class="row-projects">
      {% for project in p %}
        <div class="project">
          <!-- Project Focus -->
          <a href="#" 
            class="project-line pop" 
            id="percentage"
            data-toggle="popover" 
            data-trigger="hover" 
            data-html="true"
            data-content="<font color={{ project['color'] }}>This is some text!</font>" 
'           data-placement="top" 
            data-color="{{ project['color'] }}"
            data-project-id="{{ project['project_id'] }}"
            data-project-name="{{ project['project_name'] }}"></a>
          <ul class="slides">
            {% for action in project['actions']%}
              {% if action['finished'] == "0"%}
                <li class="slide action-button pop not_done {{ action['project_id'] }}" data-toggle="popover " 
                     data-trigger="hover" 
                     data-action-id="{{ action['action_id'] }}" 
                     data-color="{{ action['color'] }}"
                     data-project-name="{{ project['project_name'] }}"
                     data-content="
                      {{ action['action_name'] }}
                      {{ action['description'] }}
                      <br>
                      <a href='{{ url_for('edit_action', value=action) }}''>Edit</a>
                      <a href='{{ url_for('remove_action', value=action['action_id']) }}''>Delete</a>
                      ">
                </li>
              {% else %} 
                <li class="slide action-button pop done {{ action['project_id'] }}" data-toggle="popover" 
                     data-trigger="hover" 
                     data-action-id="{{ action['action_id'] }}" 
                     data-color="{{ action['color'] }}"
                     data-project-name="{{ project['project_name'] }}"
                     data-content="
                      {{ action['action_name'] }}
                      {{ action['description'] }}
                      <br>
                      <a href='{{ url_for('edit_action', value=action) }}''>Edit</a>
                      <a href='{{ url_for('remove_action', value=action['action_id']) }}''>Delete</a>
                      ">
                </li>
              {% endif %} 
            {% endfor %}
            <li><button class="action-button text-white done" data-toggle="modal" data-target="#actionModal" data-position="left" data-tooltip="Add Action" data-project-name="{{ project['project_name'] }}" data-color="{{ project['color'] }}">+</button></li>
          </ul><!-- 
          <a class="btn btn-primary" role="button" href="{{ url_for('create_action',value=project['project_name'] ) }}">+</a> -->
          <!-- TODO: submit project_name using hidden data field in wtform -->
          
        </div>
      {% endfor %}
    </div>

    <!-- Floating Action Button Modal Trigger-->
    <div class="fixed-action-btn">
      <button class="btn-floating btn-large red accent-2 tooltipped" 
      data-toggle="modal" data-target="#projectModal" data-position="left" data-tooltip="Create Project"><i class="large material-icons">add</i></button>
    </div>


<button class="btn btn-primary">Change modal</button>

<button id='testButton' data-toggle="modal" data-target="#testModal1" class="btn btn-success">
  Test
</button>

<div class="modal fade" id="testModal1" >
  <div class="modal-dialog">
    <div class="modal-content">
      Testing Testing 1
    </div>
  </div>
</div>

<div class="modal fade" id="create-project-modal" >
  <div class="modal-dialog">
    <div class="modal-content">
      Testing Testing 2
    </div>
  </div>
</div>

    <!-- Create Project Modal Structure -->
    <div class="modal fade" id="projectModal">
      <div class="modal-content">
        <h4>Create a Project</h4>
        <form method="post" action='{{ url_for("create_project") }}' name="ProjectForm">
        {{ projectForm.hidden_tag() }}
        <p>
          Project Name: <br>
          {{projectForm.project_name(size=120)}} <br>
        </p>
        <p>
          Description: <br>
          {{projectForm.description(size=120)}} <br>          
        </p>
        <p>
          Due Date: <br>
          {{projectForm.due_date(size=120)}} <br>          
        </p>
        <p>
          Color: <br>
          {{projectForm.color(size=120)}} <br>          
        </p>
        <p><input class="btn btn-primary" type="submit" value="Create Project"></p>
      </form>
      </div>
    </div>


    <!-- Create Action Modal Structure -->
    <div class="modal" id="actionModal" >
      <div class="modal-content">
        <h4>Add Action</h4>
        <form method="post" action="{{ url_for('create_action', value='Build a House' ) }}" name="ActionForm">
          <!-- how to set value here -->
        {{ actionForm.hidden_tag() }}
        <p>
          Action Name: <br>
          {{actionForm.action_name(size=120)}} <br>
        </p>
        <p>
          Description: <br>
          {{actionForm.description(size=120)}} <br>          
        </p>
        <p>
          Due Date: <br>
          {{actionForm.due_date(size=120)}} <br>          
        </p>
        <p><input class="btn btn-primary" type="submit" value="Add Action"></p>
      </form>
      </div>
    </div>

    <!-- Edit Action Modal Structure -->
    <div id="edit-action-modal" class="modal">
      <div class="modal-content">
        <h4>Modal Header</h4>
        <p>A bunch of text</p>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Agree</a>
      </div>
    </div>

    <script src="{{url_for('static', filename='js/main.js')}}"></script>
  {% endblock %}
  </body>

</html>
